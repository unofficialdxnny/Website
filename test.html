<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Now Playing Showcase</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="widget-container">
    <img src="" alt="Game Image" class="game-image">
    <div class="game-details">
      <h2 class="game-name"></h2>
      <p class="game-state"></p>

    </div>
  </div>
  
  <div class="snp">
    <img src="https://spotify-github-profile.vercel.app/api/view?uid=ahmeddanial&cover_image=true&theme=novatorem&show_offline=false&background_color=121212&interchange=false&bar_color=(bar-color-hex-code-goes-here)&bar_color_cover=false" alt="" class="s">
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      async function updateDiscordStatus() {
        try {
          const response = await fetch('https://api.lanyard.rest/v1/users/898937224895270972');
          const data = await response.json();

          if (response.ok) {
            const status = data.data.discord_status;
            const gameActivity = data.data.activities.find(activity => activity.type === 0);
            const gameImageElement = document.querySelector('.game-image');
            const gameNameElement = document.querySelector('.game-name');
            const gameStateElement = document.querySelector('.game-state');
            const gameModeElement = document.getElementById('game-mode');
            const gameServerElement = document.getElementById('game-server');
            const widget = document.getElementsByClassName('.widget-container')

            // Change color based on status
            switch (status) {
              case 'online':
                document.body.style.backgroundColor = 'green';
                break;
              case 'idle':
                document.body.style.backgroundColor = 'yellow';
                break;
              case 'dnd':
                document.body.style.backgroundColor = 'red';
                break;
              case 'offline':
                document.body.style.backgroundColor = 'gray';
                break;
              default:
                document.body.style.backgroundColor = 'white';
            }

            if (gameActivity) {
              if (gameActivity.name === 'Rocket League') {
                // Display specific data for Rocket League
                gameImageElement.src = 'https://allandevery.co.uk/cdn/shop/files/BA000000503-BLK-ZOOM_da9da9e4-ffd2-4c0e-84b2-15c4cb1bf8b7.jpg?v=1682526095'
                gameNameElement.textContent = gameActivity.name;
                gameStateElement.textContent = gameActivity.state;
                gameModeElement.textContent = `Mode: ${gameActivity.details}`;
                gameServerElement.textContent = `Server: ${gameActivity.state}`;
              } else {
                // Hide specific data if not Rocket League
                gameModeElement.textContent = '';
                gameServerElement.textContent = '';
              }

              gameImageElement.src = gameActivity.assets.large_image;
              document.querySelector('.snp').style.display = 'none';
            } else {
              // Show .snp element if no game activity
              document.querySelector('.snp').style.display = '';
              widget.style.display = 'none'
              gameNameElement.textContent = '';
              gameStateElement.textContent = '';
              gameModeElement.textContent = '';
              gameServerElement.textContent = '';
            }
          } else {
            console.error('Error fetching Discord status:', data);
          }
        } catch (error) {
          console.error('Error fetching Discord status:', error);
        }
      }

      updateDiscordStatus();
      setInterval(updateDiscordStatus, 10000); // Update every 10 seconds
    });
  </script>
  <script src="script.js"></script>
</body>
</html>
